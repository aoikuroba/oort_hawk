# 22-08-09

## 完成工作

功能相关：

- 初步完成标签页功能

## 存在问题

- 标签页删除后缓存数据未清除
- 页面样式难看

## 后续任务

- 删除标签页后删除标签页缓存
- 改善标签页样式

## 难点描述

### 标签页功能的实现

在vue中，组件缓存一般使用`keep-alive`标签实现，但是该标签存在一个问题，对于指向同一个组件的路由，路由都会导向同一个组件实例，导致无法对同一个组件进行多次实例化，无法实现多标签状态隔离。

为了享受路由、缓存的便利，同时又为了实现多标签页的功能，最终决定在不改变现有技术的情况下解决该问题，目前的几个解决思路如下：

1. 采用异步组件导入的方法，动态导入组件，为组件命名并实例化，同时添加指向该组件的路由，将该路由动态添加进vuex全局状态中，最终在标签页显示路由列表，每一个列表项为一个标签页，指向一个异步导入的组件实例

2. 为标签页添加删除功能，当点击删除时，删除路由，移除标签页，同时动态调整激活标签页（此处存在一个问题，删除标签页后需要自动改变路由路径，为了图方便采用了页面后退，这样会导致反直觉的体验）

3. 删除标签页后，标签页的缓存并未删除，该处需要进一步研究解决，目前初步解决方案如下：
   - 为每个异步组件添加name属性，在`keep-alive`组件的`include`属性中添加需要缓测的页面实例，当移除标签页同时根据移除name属性
   - 在删除页面的事件中添加销毁实例的方法，但目前还未找到函数，此方法涉及到底层操作
   - 采用`v-if`动态删除组件实例

## 今日反思

即使框架十分方便简洁，但为了实现框架未提供的业务需求，有时仍会添加很多耦合难看的代码，导致整个项目代码的混乱。

总结，有时为了方便省事采取的解决方案，有可能在后续开发中造成连锁的不良影响。
